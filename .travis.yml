language: go

go:
 - 1.x
 - 1.11.x
 - 1.12.x
 - stable
   env: LATEST=true

before_install:
  - go get github.com/mitchellh/gox
  
script:
  - sh ./go-check-format.sh
  - go vet $(go list ./... | grep -v /vendor/)
  - go test -v -race ./...
  - go build
  - if [ "${LATEST}" = "true" ]; then sh ./gox-build.sh; fi
 
